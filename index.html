<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>VORTIX 3D</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
--primary:#a855f7;
--secondary:#7c3aed;
--green:#22c55e;
--red:#ef4444;
--gold:#facc15;
}

*{box-sizing:border-box}

body{
margin:0;
font-family:'Montserrat',sans-serif;
color:white;
background:#0f001f;
}

/* HEADER */
header{
padding:25px;
text-align:center;
background:#16002b;
}

.logo{
font-family:'Orbitron';
font-size:38px;
color:#a855f7;
}

/* PRODUTOS */
.container{
max-width:1200px;
margin:auto;
padding:40px 20px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
gap:30px;
}

.card{
background:#1a0033;
border-radius:15px;
padding:15px;
text-align:center;
}

.card img{
width:100%;
height:250px;
object-fit:contain;
background:black;
border-radius:10px;
}

.preco{color:var(--green);font-weight:bold;margin:10px 0;}

.btn{
background:var(--primary);
color:white;
border:none;
padding:10px;
border-radius:8px;
cursor:pointer;
width:100%;
font-weight:bold;
}

/* CARRINHO BOTAO */
.carrinho-btn{
position:fixed;
bottom:20px;
right:20px;
background:var(--gold);
color:black;
padding:15px 20px;
border-radius:50px;
cursor:pointer;
font-weight:bold;
box-shadow:0 0 15px var(--gold);
z-index:999;
}

.cart-count{
background:red;
color:white;
border-radius:50%;
padding:4px 8px;
font-size:12px;
position:absolute;
top:-8px;
right:-8px;
}

/* MODAL */
.modal{
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.8);
justify-content:center;
align-items:center;
z-index:1000;
}

.modal-content{
background:#16002b;
padding:20px;
border-radius:15px;
width:95%;
max-width:450px;
position:relative;
}

.close{
position:absolute;
right:15px;
top:10px;
cursor:pointer;
color:red;
font-weight:bold;
}

input{
width:100%;
padding:8px;
margin:5px 0;
border-radius:6px;
border:none;
}

/* TOAST */
.toast{
position:fixed;
top:20px;
right:-300px;
padding:12px 20px;
border-radius:10px;
font-weight:bold;
color:white;
transition:0.4s;
z-index:2000;
}
.toast.show{right:20px;}
.success{background:var(--green);}
.error{background:var(--red);}
</style>
</head>
<body>

<header>
<div class="logo">VORTIX 3D</div>
</header>

<div class="container">
<div class="grid" id="produtos"></div>
</div>

<div class="carrinho-btn" onclick="abrirCarrinho()">
ðŸ›’ Carrinho
<span id="cartCount" class="cart-count">0</span>
</div>

<div class="modal" id="modalCarrinho">
<div class="modal-content">
<div class="close" onclick="fecharCarrinho()">X</div>
<h2>Seu Carrinho</h2>

<div id="lista"></div>
<hr>

<input type="text" id="cep" placeholder="CEP">
<input type="text" id="cupom" placeholder="Cupom de desconto">
<button class="btn" onclick="aplicarCupom()">Aplicar Cupom</button>

<p>Frete: R$ <span id="frete">0.00</span></p>
<p>Desconto: R$ <span id="desconto">0.00</span></p>
<h3>Total: R$ <span id="total">0.00</span></h3>

<button class="btn" onclick="finalizar()">Finalizar</button>
</div>
</div>

<div id="toast" class="toast"></div>

<script>
let produtos=[
{nome:"Black Noir",preco:95,estoque:5,img:"black-noir.png"},
{nome:"Indiana Jones",preco:110,estoque:3,img:"indiana.png"}
]

let cart=[]
let desconto=0
let cupomAplicado=null

const cupons={
"DESCONTO10":0.10,
"VORTIX20":0.20,
"FRETEGRATIS":"frete"
}

function renderProdutos(){
let c=document.getElementById("produtos")
c.innerHTML=""
produtos.forEach((p,i)=>{
c.innerHTML+=`
<div class="card">
<img src="./${p.img}">
<h3>${p.nome}</h3>
<div class="preco">R$ ${p.preco}</div>
<button class="btn" onclick="addToCart(${i})">Adicionar</button>
</div>`
})
}

function atualizarCarrinhoIcon(){
document.getElementById("cartCount").innerText=
cart.reduce((a,b)=>a+b.qtd,0)
}

function addToCart(i){
let item=cart.find(c=>c.nome===produtos[i].nome)
if(item)item.qtd++
else cart.push({nome:produtos[i].nome,preco:produtos[i].preco,qtd:1})
atualizar()
toast("Produto adicionado","success")
}

function aplicarCupom(){
let codigo=document.getElementById("cupom").value.toUpperCase()
if(!cupons[codigo]){
toast("Cupom invÃ¡lido","error")
return
}
cupomAplicado=codigo
toast("Cupom aplicado","success")
atualizar()
}

function calcularFrete(cep){
if(cep.startsWith("13"))return 15
return 30
}

function atualizar(){
let lista=document.getElementById("lista")
lista.innerHTML=""
let subtotal=0

cart.forEach(item=>{
subtotal+=item.preco*item.qtd
lista.innerHTML+=`${item.nome} (${item.qtd}x)<br>`
})

let cep=document.getElementById("cep").value
let frete=cep.length>=8?calcularFrete(cep):0

desconto=0

if(cupomAplicado){
if(cupons[cupomAplicado]==="frete"){
frete=0
}else{
desconto=subtotal*cupons[cupomAplicado]
}
}

document.getElementById("frete").innerText=frete.toFixed(2)
document.getElementById("desconto").innerText=desconto.toFixed(2)
document.getElementById("total").innerText=(subtotal+frete-desconto).toFixed(2)

atualizarCarrinhoIcon()
}

document.getElementById("cep").addEventListener("input",atualizar)

function abrirCarrinho(){
document.getElementById("modalCarrinho").style.display="flex"
atualizar()
}

function fecharCarrinho(){
document.getElementById("modalCarrinho").style.display="none"
}

function finalizar(){
alert("Pedido finalizado!")
cart=[]
cupomAplicado=null
document.getElementById("cupom").value=""
atualizar()
}

function toast(msg,type){
let t=document.getElementById("toast")
t.innerText=msg
t.className="toast show "+type
setTimeout(()=>t.classList.remove("show"),2500)
}

renderProdutos()
</script>

</body>
</html>
